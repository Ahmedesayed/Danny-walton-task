<div class="flex flex-column h-full">
  <div class="flex align-items-center justify-content-between mb-4">
    <div class="text-xl font-bold">MY PROFILE</div>
    <button
      pButton
      type="button"
      [label]="editable ? 'Save' : 'Edit'"
      icon="pi {{ editable ? 'pi-save' : 'pi-user-edit' }}"
      class="p-button-link"
      [loading]="editLoading"
      [disabled]="editLoading || (editable && (!firstName || !lastName))"
      (click)="edit()"
    ></button>
  </div>
  <div class="mr-4">
    <div class="grid mb-4">
      <div class="col-12 lg:col-6 flex">
        <div class="text-400 half-flex">First Name</div>
        <div *ngIf="!editable">
          {{ firstName }}
        </div>
        <div *ngIf="editable">
          <input pInputText [(ngModel)]="firstName" [disabled]="editLoading" />
        </div>
      </div>

      <div class="col-12 lg:col-6 flex">
        <div class="text-400 half-flex">Last Name</div>
        <div *ngIf="!editable">
          {{ lastName }}
        </div>
        <div *ngIf="editable">
          <input pInputText [(ngModel)]="lastName" [disabled]="editLoading" />
        </div>
      </div>


    </div>

    <div class="flex align-items-center justify-content-between mb-4">
      <div class="text-sm text-400">YOUR EMAILS</div>
      <div
        class="text-sm underline text-blue-400 cursor-pointer"
        (click)="addEmail()"
      >
        ADD EMAIL
      </div>
    </div>
    <div
      #emailItem
      class="flex align-items-center justify-content-between surface-50 border-round border-1 border-blue-100 p-3 mb-3"
      *ngFor="let email of emails; let i = index"
    >
      <p-menu
        #menuEmail
        styleClass="profile-menu"
        [popup]="true"
        [model]="emailMenu"
        [appendTo]="emailItem"
        (onShow)="setMenuSelectedItem(email)"
      ></p-menu>
      <span class="prefix flex-1">{{ i | countPrefix }} Email</span>
      <span *ngIf="!email.isEditing" class="flex-1 {{email.isPrimary ? 'font-bold':''}} overflow-hidden text-overflow-ellipsis white-space-nowrap">{{
        email.email
      }}</span>

      <button
        pButton
        class="p-button-rounded bg-blue-100 border-0 text-700"
        icon="pi pi-ellipsis-h"
        *ngIf="!email.isEditing"
        (click)="
          checkDeleteItem(email.isPrimary, emailMenu);
          checkEditItem(emailMenu, email);
          menuEmail.toggle($event)
        "
      ></button>
    </div>
    <div class="flex align-items-center justify-content-between mb-4">
      <div class="text-sm text-400">YOUR NUMBER</div>
      <div
        class="text-sm underline text-blue-400 cursor-pointer"
        (click)="addPhoneNumber()"
      >
        ADD NUMBER
      </div>
    </div>
    <div
      class="flex align-items-center justify-content-between surface-50 border-round border-1 border-blue-100 p-3 mb-3"
      #phoneItem
      *ngFor="let phoneNumber of phoneNumbers; let i = index"
    >
      <p-menu
        #menuPhoneNumber
        styleClass="profile-menu"
        [popup]="true"
        [model]="phoneNumberMenu"
        (onShow)="setMenuSelectedItem(phoneNumber)"
      ></p-menu>
      <span class="prefix flex-1 ">{{ i | countPrefix }} Phone Number</span>
      <span *ngIf="!phoneNumber.isEditing" class="flex-1 overflow-hidden text-overflow-ellipsis white-space-nowrap {{phoneNumber.isPrimary ? 'font-bold':''}}">{{
        phoneNumber.phoneNumber
      }}</span>

      <button
        pButton
        class="p-button-rounded bg-blue-100 border-0 text-700"
        icon="pi pi-ellipsis-h"
        *ngIf="!phoneNumber.isEditing"
        (click)="
          checkDeleteItem(phoneNumber.isPrimary, phoneNumberMenu);
          checkEditItem(phoneNumberMenu, phoneNumber);
          menuPhoneNumber.toggle($event)
        "
      ></button>
    </div>
  </div>
</div>
